<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Pikon Configurator</title>
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <link href="pikon-style.css" rel="stylesheet" type="text/css">
</head>

<body>
    <h2>Pi Camera Configurator</h2>
    <form action="/save" method="post">
        Image Encoding:
        <input id="jpeg" name="encoding" type="radio" value="jpeg"> JPEG
        <input id="dng" name="encoding" type="radio" value="dng"> DNG
        <br>
        <br>

        ISO (0 - 800):
        <input id="iso" name="iso" type="number" min="0" max="800" step="100" value="">
        <br>
        <br>

        Shutter speed (s) (0 - 10):
        <input id="shutter" name="shutter speed seconds" type="number" min="0" max="10" step="0.000001" value="">
        <br>
        <br>

        <input name="submit" type="submit" value="Save">
        <br>
        <br>

    </form>

    <script>
      var xmlhttp = new XMLHttpRequest();
      xmlhttp.open("GET", "/config", true);
      xmlhttp.onreadystatechange = function() {
        if (xmlhttp.readyState === XMLHttpRequest.DONE && xmlhttp.status === 200) {
          var conf = JSON.parse(xmlhttp.responseText);
          document.getElementById(conf.image_format).checked = true;
          document.getElementById("iso").value = conf.iso;
          document.getElementById("shutter").value = conf.shutter_speed;
        }
      };
      xmlhttp.send();
    </script>
</body>
</html>

